<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create New Project</title>
  <link rel="stylesheet" href="../../css/vendor/bootstrap.min.css">
  <link rel="stylesheet" href="../../css/vendor/propeller.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <form action="#">
    <div class="pmd-card pmd-z-depth pmd-card-custom-form">
      <div class="pmd-card-body">
        <div class="form-group pmd-textfield">
          <label for="project_name" class="control-label">Project name:</label>
          <input type="text" id="project_name" class="form-control"><span class="pmd-textfield-focused"></span>
        </div>
        <div class="form-group pmd-textfield">
          <label for="project_path" class="control-label">Project path:</label>
          <div class="input-group">
            <input type="text" id="project_path" class="form-control"><span class="pmd-textfield-focused"></span>
            <div class="input-group-addon"><button id="choose-path" class="btn pmd-btn-raised pmd-ripple-effect btn-primary" type="button">...</button></div>
          </div>
        </div>
        <button class="btn pmd-btn-raised pmd-ripple-effect btn-primary" type="submit">Create</button>
      </div>
    </div>
  </form>
  <div class="pmd-alert-container right top"></div>
  <script>
    window.$ = window.jQuery = require('../../js/vendor/jquery-1.12.2.min.js')
    require('../../js/vendor/bootstrap.min.js')
    require('../../js/vendor/propeller.min.js')
    const utilWeb = require('../../js/utilWeb.js')

    const {ipcRenderer} = require('electron')
    const {dialog} = require('electron').remote

    $(document).ready(() => {

      $("#choose-path").click((event) => {
        dialog.showOpenDialog({properties: ['openDirectory']}, (directory) => {
          $("#project_path").val(directory[0])
        })
      })

      $("form").on("submit", (event) => {
        event.preventDefault()
        let project_name = $("#project_name").val().trim()
        let project_path = $("#project_path").val().trim()
        if(project_name != "" && project_path != ""){
          let project = {
            "name": project_name,
            "path": project_path
          }
          ipcRenderer.send("data", project)
        }
        else{
          $(".pmd-alert-container").append(utilWeb.createPmdAlert("error", "All fields are required!"));
        }
      })

    })

    ipcRenderer.on("error", (event, msg) => {
      $(".pmd-alert-container").append(utilWeb.createPmdAlert("error", msg));
    })
  
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create New Project</title>
  <link rel="stylesheet" href="../../../css/vendor/bootstrap.min.css">
  <link rel="stylesheet" href="../../../css/vendor/propeller.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <form action="#">
    <div class="pmd-card pmd-z-depth pmd-card-custom-form">
      <div class="pmd-card-body">
        <div class="form-group pmd-textfield">
          <label for="project_name" class="control-label">Project name:</label>
          <input type="text" id="project_name" class="form-control" required="required"><span class="pmd-textfield-focused"></span>
        </div>
        <div class="form-group pmd-textfield">
          <label for="project_path" class="control-label">Project path:</label>
          <div class="input-group">
            <input type="text" id="project_path" class="form-control" required="required"><span class="pmd-textfield-focused"></span>
            <div class="input-group-addon"><button id="choose-path" class="btn pmd-btn-raised pmd-ripple-effect btn-primary" type="button">...</button></div>
          </div>
        </div>
        <div class="form-group pmd-textfield">
          <label for="type" class="control-label">Type:</label>
          <select id="type" class="form-control" multiple="multiple">
            <option value="">Blank</option>
            <option value="cordova">Cordova</option>
            <option value="ionic">Ionic</option>
          </select>
        </div>
        <div class="form-group pmd-textfield">
          <label for="author" class="control-label">Author:</label>
          <input type="text" id="author" class="form-control"><span class="pmd-textfield-focused"></span>
        </div>
        <div class="form-group pmd-textfield">
          <label for="author_uri" class="control-label">Author URI:</label>
          <input type="text" id="author_uri" class="form-control"><span class="pmd-textfield-focused"></span>
        </div>
        <div class="form-group pmd-textfield">
          <label for="description" class="control-label">Description:</label>
          <textarea id="description" class="form-control" maxlength="255"></textarea><span class="pmd-textfield-focused"></span>
        </div>
        <div class="form-group pmd-textfield">
          <label for="version" class="control-label">Version:</label>
          <input type="text" id="version" class="form-control"><span class="pmd-textfield-focused"></span>
        </div>
        <div class="form-group pmd-textfield">
          <label for="license" class="control-label">License:</label>
          <input type="text" id="license" class="form-control"><span class="pmd-textfield-focused"></span>
        </div>
        <div class="form-group pmd-textfield">
          <label for="license_uri" class="control-label">License URI:</label>
          <input type="text" id="license_uri" class="form-control"><span class="pmd-textfield-focused"></span>
        </div>
        <div class="form-group pmd-textfield">
          <label for="tags" class="control-label">Tags:</label>
          <input type="text" id="tags" class="form-control"><span class="pmd-textfield-focused"></span>
        </div>
        <button class="btn pmd-btn-raised pmd-ripple-effect btn-primary" type="submit">Create</button>
      </div>
    </div>
  </form>
  <div class="pmd-alert-container right top"></div>
  <script>
    window.$ = window.jQuery = require('../../../js/vendor/jquery-1.12.2.min.js')
    require('../../../js/vendor/bootstrap.min.js')
    require('../../../js/vendor/propeller.min.js')
    const utilWeb = require('../../../js/utilWeb.js')

    const {ipcRenderer} = require('electron')
    const {dialog} = require('electron').remote

    $(document).ready(() => {

      $("#choose-path").click(function(event) {
        dialog.showOpenDialog({properties: ['openDirectory']}, function(directory) {
          $("#project_path").val(directory[0])
        })
      })

      $("form").on("submit", function(event) {
        event.preventDefault()

        let project = {
          "project_name": $("#project_name").val().trim(),
          "author": $("#author").val().trim(),
          "author_uri": $("#author_uri").val().trim(),
          "description": $("#description").val().trim(),
          "version": $("#version").val().trim(),
          "license": $("#license").val().trim(),
          "license_uri": $("#license_uri").val().trim(),
          "tags": $("#tags").val().trim(),
          "path": $("#project_path").val().trim(),
          "type": utilWeb.getMulitpleSelectValues("#type")
        }
        
        ipcRenderer.send("data", project)

      })

    })

    ipcRenderer.on("error", (event, msg) => {
      $(".pmd-alert-container").append(utilWeb.createPmdAlert("error", msg));
    })
    
  </script>
</body>
</html>